# Сервер корпоративного одобрения

Этот модуль представляет собой серверную часть приложения для управления корпоративными одобрениями, собраниями и голосованием.

## Обзор

Сервер реализован на Spring Boot и предоставляет REST API для управления корпоративными процессами, включая:

- Управление компаниями и их типами
- Планирование и проведение собраний
- Создание повестки дня и тем для обсуждения
- Управление участниками собраний
- Процессы голосования и подсчет результатов
- Генерацию протоколов

## Архитектура

Проект следует классической архитектуре Spring Boot с разделением на слои:

- **Controller** - обработчики HTTP-запросов
- **Service** - бизнес-логика приложения
- **Repository** - доступ к данным
- **Model** - сущности и DTO
- **Exception** - обработка исключений

## API Документация

Проект включает встроенную документацию API с использованием OpenAPI 3:

- **Swagger UI**: доступен после запуска приложения по адресу `/swagger-ui.html`
- **OpenAPI спецификация**: доступна в формате JSON по адресу `/v3/api-docs`

Документация автоматически генерируется на основе аннотаций в коде и предоставляет:
- Описание всех доступных endpoints
- Параметры запросов и ответов
- Примеры использования
- Возможность интерактивного тестирования API

## Javadoc

Проект включает подробную документацию Javadoc, которая может быть сгенерирована с помощью Maven командой:

```bash
mvn javadoc:javadoc
```

Сгенерированная документация будет доступна в директории `target/site/apidocs/`.

Javadoc включает:
- Описание классов, методов и полей
- Информацию о параметрах, возвращаемых значениях и исключениях
- Ссылки на связанные классы и интерфейсы
- Версию и автора для каждого класса

## Утилиты (Utils)

Модуль содержит несколько вспомогательных компонентов в пакете `ru.avg.server.utils`:

### Verifier

Класс `Verifier` обеспечивает проверку целостности данных и контроль доступа между компаниями и собраниями. Он гарантирует, что операции выполняются только при:
- Существовании указанной компании
- Принадлежности собрания указанной компании

Это обеспечивает многопользовательскую изоляцию данных и предотвращает доступ к данным других компаний.

### InnValidator

Компонент `InnValidator` реализует валидацию российских ИНН (Идентификационных Номеров Налогоплательщика). Он проверяет, что значение соответствует формату 10-значного числа с помощью регулярного выражения `^\\d{10}$`.

Валидатор поддерживает различные типы полей (String, Long, Integer) через преобразование в строковое представление.

### Updater

Утилита `Updater` предоставляет функциональность для обновления сущностей, позволяя копировать значения полей из DTO в сущности базы данных, игнорируя null-значения. Это позволяет частично обновлять сущности через PATCH-запросы.

## Особенности голосования

Система поддерживает различные типы голосования в зависимости от типа собрания:

- **Совет директоров (BOD)**: простое большинство (>50% голосов участников)
- **Собрания акционеров (OOO, AO)**: большинство на основе процентного соотношения долей (>50% долей)

## Запуск приложения

Для запуска приложения необходимо:

1. Убедиться, что установлены Java 21 и Maven
2. Выполнить команду: `mvn spring-boot:run`

## Технологии

- Spring Boot 4.0.0
- Java 21
- Spring Data JPA
- PostgreSQL
- Lombok
- Springdoc OpenAPI (Swagger)
- Maven

## Автор

AVG